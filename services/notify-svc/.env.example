# Notify Service Environment Variables

PORT=4040
HOST=0.0.0.0
NODE_ENV=development

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/aivo_notify?schema=public

# NATS
NATS_ENABLED=false
NATS_URL=nats://localhost:4222

# ══════════════════════════════════════════════════════════════════════════════
# PUSH NOTIFICATIONS
# ══════════════════════════════════════════════════════════════════════════════

# Firebase Cloud Messaging (for Android/Web push + iOS via FCM)
FCM_ENABLED=true
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com

# Apple Push Notification Service (for native iOS - optional if using FCM for iOS)
APNS_ENABLED=false
APNS_KEY_ID=ABC123DEFG
APNS_TEAM_ID=TEAM123456
APNS_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"
APNS_BUNDLE_ID=com.aivo.learner
APNS_ENVIRONMENT=development  # 'development' or 'production'

# ══════════════════════════════════════════════════════════════════════════════
# EMAIL
# ══════════════════════════════════════════════════════════════════════════════

EMAIL_ENABLED=false
EMAIL_PROVIDER=sendgrid
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
EMAIL_FROM=noreply@aivo.app
EMAIL_FROM_NAME=AIVO

# ══════════════════════════════════════════════════════════════════════════════
# SMS
# ══════════════════════════════════════════════════════════════════════════════

SMS_ENABLED=false
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_FROM_NUMBER=+15551234567

# ══════════════════════════════════════════════════════════════════════════════
# RATE LIMITS & CLEANUP
# ══════════════════════════════════════════════════════════════════════════════

PUSH_RATE_LIMIT=100
EMAIL_RATE_LIMIT=50
SMS_RATE_LIMIT=10
STALE_TOKEN_DAYS=60
MAX_DEVICES_PER_USER=10

# ══════════════════════════════════════════════════════════════════════════════
# COPPA COMPLIANCE
# ══════════════════════════════════════════════════════════════════════════════

# Strict mode blocks all non-educational notifications for children
COPPA_STRICT_MODE=true

# Log all COPPA violations for audit purposes
COPPA_LOG_VIOLATIONS=true

# Default quiet hours for learner devices (to enforce bedtime)
LEARNER_QUIET_HOURS_ENABLED=true
LEARNER_QUIET_HOURS_START=20:00
LEARNER_QUIET_HOURS_END=08:00

# ══════════════════════════════════════════════════════════════════════════════
# NOTIFICATION ANALYTICS
# ══════════════════════════════════════════════════════════════════════════════

NOTIFICATION_ANALYTICS_ENABLED=true
NOTIFICATION_ANALYTICS_SAMPLE_RATE=0.1
