# ===========================================
# AIVO Platform - Staging Configuration
# ===========================================

# Environment
NODE_ENV=staging
LOG_LEVEL=info

# Server
HOST=0.0.0.0
PORT=3000

# Database (Cloud SQL)
DATABASE_HOST=${CLOUDSQL_HOST}
DATABASE_PORT=5432
DATABASE_SSL=true
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20

# Connection strings set per-service via secrets

# Redis (Memorystore)
REDIS_HOST=${MEMORYSTORE_HOST}
REDIS_PORT=6379
REDIS_TLS=true

# NATS (hosted on GKE)
NATS_URL=nats://nats.aivo-staging.svc.cluster.local:4222

# JWT Configuration
JWT_ALGORITHM=RS256
JWT_ACCESS_TOKEN_TTL=15m
JWT_REFRESH_TOKEN_TTL=7d
JWT_ISSUER=aivo-staging
JWT_AUDIENCE=aivo-platform

# Storage (GCS)
STORAGE_PROVIDER=gcs
STORAGE_BUCKET_CONTENT=aivo-content-staging
STORAGE_BUCKET_UPLOADS=aivo-uploads-staging
STORAGE_BUCKET_EXPORTS=aivo-exports-staging

# CDN
CDN_URL=https://staging-cdn.aivo.ai

# Email (SendGrid)
EMAIL_PROVIDER=sendgrid
EMAIL_FROM=noreply@staging.aivo.ai
EMAIL_FROM_NAME=AIVO Platform (Staging)

# AI Configuration
AI_PROVIDER=openai
OPENAI_MODEL=gpt-4-turbo-preview
AI_REQUEST_TIMEOUT_MS=60000

# Search
ELASTICSEARCH_URL=${ELASTICSEARCH_URL}
ELASTICSEARCH_INDEX_PREFIX=aivo_staging

# Observability
OTEL_EXPORTER_OTLP_ENDPOINT=https://otel-collector.aivo-staging.svc.cluster.local:4317
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1

# Feature Flags
FEATURE_AI_TUTOR=true
FEATURE_GAMIFICATION=true
FEATURE_MARKETPLACE=true
FEATURE_REAL_TIME_COLLAB=true
FEATURE_HOMEWORK_HELPER=true
FEATURE_BASELINE_ASSESSMENT=true

# CORS
CORS_ORIGINS=https://staging.aivo.ai,https://author-staging.aivo.ai,https://admin-staging.aivo.ai

# Rate Limiting
RATE_LIMIT_MAX_REQUESTS=200

# Mobile App URLs
MOBILE_DEEP_LINK_SCHEME=aivo-staging
MOBILE_UNIVERSAL_LINK_DOMAIN=staging.aivo.ai

# WebSocket
WS_PING_INTERVAL_MS=30000
WS_PING_TIMEOUT_MS=5000
