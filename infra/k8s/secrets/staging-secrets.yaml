# AIVO Platform - Staging Secrets
# Apply with: kubectl apply -f staging-secrets.yaml -n aivo-staging
#
# NOTE: In production, use sealed-secrets, external-secrets, or
# Google Secret Manager with Workload Identity instead of plain Secrets

apiVersion: v1
kind: Namespace
metadata:
  name: aivo-staging
  labels:
    app.kubernetes.io/part-of: aivo-platform
    environment: staging

---
apiVersion: v1
kind: Secret
metadata:
  name: database-credentials
  namespace: aivo-staging
  labels:
    app.kubernetes.io/part-of: aivo-platform
type: Opaque
stringData:
  # Primary database URLs (replace with actual values)
  AUTH_DATABASE_URL: "postgresql://auth:PASSWORD@cloudsql-host:5432/aivo_auth?sslmode=require"
  TENANT_DATABASE_URL: "postgresql://tenant:PASSWORD@cloudsql-host:5432/aivo_tenant?sslmode=require"
  CONTENT_DATABASE_URL: "postgresql://content:PASSWORD@cloudsql-host:5432/aivo_content?sslmode=require"
  SESSION_DATABASE_URL: "postgresql://session:PASSWORD@cloudsql-host:5432/aivo_session?sslmode=require"
  ASSESSMENT_DATABASE_URL: "postgresql://assessment:PASSWORD@cloudsql-host:5432/aivo_assessment?sslmode=require"
  ANALYTICS_DATABASE_URL: "postgresql://analytics:PASSWORD@cloudsql-host:5432/aivo_analytics?sslmode=require"
  ENGAGEMENT_DATABASE_URL: "postgresql://engagement:PASSWORD@cloudsql-host:5432/aivo_engagement?sslmode=require"
  PERSONALIZATION_DATABASE_URL: "postgresql://personalization:PASSWORD@cloudsql-host:5432/aivo_personalization?sslmode=require"
  BASELINE_DATABASE_URL: "postgresql://baseline:PASSWORD@cloudsql-host:5432/aivo_baseline?sslmode=require"
  BILLING_DATABASE_URL: "postgresql://billing:PASSWORD@cloudsql-host:5432/aivo_billing?sslmode=require"
  NOTIFY_DATABASE_URL: "postgresql://notify:PASSWORD@cloudsql-host:5432/aivo_notify?sslmode=require"

---
apiVersion: v1
kind: Secret
metadata:
  name: redis-credentials
  namespace: aivo-staging
  labels:
    app.kubernetes.io/part-of: aivo-platform
type: Opaque
stringData:
  REDIS_URL: "rediss://:PASSWORD@memorystore-host:6379"
  REDIS_PASSWORD: "CHANGE_ME"

---
apiVersion: v1
kind: Secret
metadata:
  name: jwt-keys
  namespace: aivo-staging
  labels:
    app.kubernetes.io/part-of: aivo-platform
type: Opaque
stringData:
  JWT_KEY_ID: "staging-key-001"
  # Base64 encoded PEM keys - generate with scripts/generate-secrets.sh
  JWT_PRIVATE_KEY: |
    -----BEGIN RSA PRIVATE KEY-----
    REPLACE_WITH_ACTUAL_KEY
    -----END RSA PRIVATE KEY-----
  JWT_PUBLIC_KEY: |
    -----BEGIN PUBLIC KEY-----
    REPLACE_WITH_ACTUAL_KEY
    -----END PUBLIC KEY-----

---
apiVersion: v1
kind: Secret
metadata:
  name: external-services
  namespace: aivo-staging
  labels:
    app.kubernetes.io/part-of: aivo-platform
type: Opaque
stringData:
  # AI Services
  OPENAI_API_KEY: "sk-REPLACE_ME"
  ANTHROPIC_API_KEY: "sk-ant-REPLACE_ME"
  
  # Email
  SENDGRID_API_KEY: "SG.REPLACE_ME"
  
  # Payments
  STRIPE_SECRET_KEY: "sk_test_REPLACE_ME"
  STRIPE_WEBHOOK_SECRET: "whsec_REPLACE_ME"
  
  # Search
  ELASTICSEARCH_URL: "https://elastic:PASSWORD@elasticsearch-host:9200"

---
apiVersion: v1
kind: Secret
metadata:
  name: encryption-keys
  namespace: aivo-staging
  labels:
    app.kubernetes.io/part-of: aivo-platform
type: Opaque
stringData:
  ENCRYPTION_KEY: "REPLACE_WITH_32_BYTE_HEX"
  ENCRYPTION_IV: "REPLACE_WITH_16_BYTE_HEX"
  WEBHOOK_SECRET: "REPLACE_ME"
  SESSION_SECRET: "REPLACE_WITH_64_CHAR_SECRET"
